<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø·Ø¹Ù…</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            color-scheme: dark;
        }
        
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: linear-gradient(135deg, #0f1419 0%, #1a1f2e 50%, #161b26 100%);
            color: #e0e0e0;
        }
        
        .modal { display: none !important; }
        .modal.active { display: flex !important; align-items: center; justify-content: center; }
        .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; line-clamp: 2; }
        
        /* Dark Mode Inputs */
        input[type="text"], input[type="email"], input[type="password"], input[type="number"], input[type="url"], textarea, select {
            background-color: #1e2330 !important;
            color: #e0e0e0 !important;
            border-color: #2a3142 !important;
        }
        
        input[type="file"] {
            background-color: #1e2330 !important;
            color: #e0e0e0 !important;
        }
        
        input::placeholder, textarea::placeholder {
            color: #888888 !important;
        }
        
        input[readonly] {
            background-color: #161b26 !important;
            border-color: #2a3142 !important;
        }
        
        /* Dark Mode Cards and Containers */
        .bg-white {
            background-color: #1a202c !important;
            color: #e0e0e0 !important;
        }
        
        .bg-gray-50, .bg-gray-100, .bg-gray-200 {
            background-color: #161b26 !important;
        }
        
        .border-gray-200, .border-gray-300 {
            border-color: #2a3142 !important;
        }
        
        .text-gray-600, .text-gray-700, .text-gray-800 {
            color: #ddd !important;
        }
        
        .text-gray-400, .text-gray-500 {
            color: #888888 !important;
        }
        
        /* Performance Optimizations */
        img { loading: lazy; }
        .bg-gray-200 { content-visibility: auto; }
        
        /* Reduce repaints */
        * {
            backface-visibility: hidden;
            perspective: 1000px;
        }
        
        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Edit Category Modal -->
    <div id="editCategoryModal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-lg p-6 max-w-md w-full">
            <h3 class="text-xl font-bold mb-4">âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙØ¦Ø©</h3>
            <input type="hidden" id="editCatId">
            <div class="space-y-4">
                <input type="text" id="editCatNameAr" placeholder="Ø§Ø³Ù… Ø§Ù„ÙØ¦Ø© Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ" class="w-full px-4 py-2 border rounded-lg">
                <input type="text" id="editCatNameEn" placeholder="Category Name" class="w-full px-4 py-2 border rounded-lg">
                
                <!-- Image Upload Section -->
                <div class="space-y-3 border rounded-lg p-4 bg-gray-50">
                    <h4 class="font-semibold text-sm">ğŸ“¸ ØµÙˆØ±Ø© Ø§Ù„ÙØ¦Ø©</h4>
                    <div class="flex items-center gap-3">
                        <input type="file" id="editCatImageFile" accept="image/*" class="flex-1 px-3 py-2 border rounded-lg text-sm" onchange="updateCategoryImagePreview(this)">
                        <img id="editCatImagePreview" src="" alt="Ù…Ø¹Ø§ÙŠÙ†Ø©" class="w-16 h-16 rounded border object-cover hidden">
                    </div>
                    <button type="button" onclick="uploadCategoryImage()" class="w-full bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700 text-sm font-medium">
                        ğŸ“¤ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©
                    </button>
                </div>
                
                <div class="flex gap-2">
                    <button onclick="updateCategory()" class="flex-1 bg-green-600 text-white py-2 rounded-lg hover:bg-green-700">
                        Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª
                    </button>
                    <button onclick="closeEditCategoryModal()" class="flex-1 bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600">
                        Ø¥Ù„ØºØ§Ø¡
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Manage Sections Modal -->
    <div id="manageSectionsModal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-lg p-6 max-w-md w-full">
            <h3 class="text-xl font-bold mb-4">ğŸ“‚ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</h3>
            <input type="hidden" id="manageSectionsCatId">
            <div class="space-y-4">
                <div class="space-y-2">
                    <label class="block font-semibold">Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Ø¬Ø¯ÙŠØ¯:</label>
                    <div class="flex gap-2">
                        <input type="text" id="newSectionName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù…" class="flex-1 px-3 py-2 border rounded-lg">
                        <button onclick="addSectionToCategory()" class="bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700">
                            â• Ø¥Ø¶Ø§ÙØ©
                        </button>
                    </div>
                </div>
                <div class="border-t pt-3">
                    <label class="block font-semibold mb-2">Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠØ©:</label>
                    <div id="currentSectionsList" class="space-y-2"></div>
                </div>
                <button onclick="closeManageSectionsModal()" class="w-full bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600">
                    ØªÙ…
                </button>
            </div>
        </div>
    </div>

    <!-- Edit Product Modal -->
    <div id="editProductModal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <h3 class="text-xl font-bold mb-4">âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬</h3>
            <input type="hidden" id="editProdId">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <select id="editProdCategory" class="px-4 py-2 border rounded-lg">
                    <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø©</option>
                </select>
                <select id="editProdSection" class="px-4 py-2 border rounded-lg">
                    <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</option>
                </select>
                <input type="text" id="editProdNameAr" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ" class="px-4 py-2 border rounded-lg">
                <input type="text" id="editProdNameEn" placeholder="Product Name" class="px-4 py-2 border rounded-lg">
                <input type="number" step="0.01" id="editProdPrice" placeholder="Ø§Ù„Ø³Ø¹Ø±" class="px-4 py-2 border rounded-lg">
                <textarea id="editProdDescAr" placeholder="Ø§Ù„ÙˆØµÙ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ" class="px-4 py-2 border rounded-lg col-span-2" rows="2"></textarea>
                
                <!-- Image Upload Section -->
                <div class="col-span-2 space-y-3 border rounded-lg p-4 bg-gray-50">
                    <h4 class="font-semibold text-sm">ğŸ“¸ ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬</h4>
                    <div class="flex items-center gap-3">
                        <input type="file" id="editProdImageFile" accept="image/*" class="flex-1 px-3 py-2 border rounded-lg text-sm" onchange="updateImagePreview(this)">
                        <img id="editProdImagePreview" src="" alt="Ù…Ø¹Ø§ÙŠÙ†Ø©" class="w-16 h-16 rounded border object-cover hidden">
                    </div>
                </div>

                <div class="col-span-2">
                    <label class="flex items-center gap-2">
                        <input type="checkbox" id="editProdFeatured" class="w-4 h-4">
                        <span>Ù…Ù†ØªØ¬ Ù…Ù…ÙŠØ² â­</span>
                    </label>
                </div>
            </div>
            <div class="flex gap-2 mt-4">
                <button onclick="updateProduct()" class="flex-1 bg-green-600 text-white py-2 rounded-lg hover:bg-green-700">
                    Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª
                </button>
                <button onclick="closeEditProductModal()" class="flex-1 bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600">
                    Ø¥Ù„ØºØ§Ø¡
                </button>
            </div>
        </div>
    </div>

    <div id="loadingOverlay" class="hidden fixed inset-0 bg-black/50 backdrop-blur-md z-40 flex flex-col items-center justify-center gap-3 text-blue-400">
        <svg class="animate-spin h-10 w-10 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
        </svg>
        <p class="font-medium">Ø¬Ø§Ø±Ù Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</p>
    </div>

    <div class="min-h-screen bg-gradient-to-b from-slate-950 via-slate-900 to-slate-950">
        <!-- Header -->
        <header class="bg-gradient-to-r from-blue-700 via-blue-800 to-indigo-900 text-white shadow-2xl border-b border-blue-600/30">
            <div class="container mx-auto px-4 py-6">
                <div class="flex flex-wrap justify-between items-center gap-4">
                    <div>
                        <h1 class="text-3xl font-bold">ğŸ½ï¸ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h1>
                        <p class="text-sm text-amber-100">Ù…Ø±Ø­Ø¨Ø§Ù‹ <span id="userName">Ù…Ø³ØªØ®Ø¯Ù…</span></p>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="openMenuLink()" class="bg-emerald-500 px-4 py-2 rounded-lg hover:bg-emerald-600 text-sm md:text-base font-medium transition-colors shadow-md">
                            ğŸ‘ï¸ Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
                        </button>
                        <button onclick="copyMenuLink()" class="bg-cyan-500 px-4 py-2 rounded-lg hover:bg-cyan-600 text-sm md:text-base font-medium transition-colors shadow-md">
                            ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·
                        </button>
                        <button id="logoutBtn" class="bg-red-500 px-4 py-2 rounded-lg hover:bg-red-600 text-sm md:text-base">
                            ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <div class="container mx-auto px-4 py-8">
            <!-- Tabs -->
            <div class="bg-slate-800 rounded-xl shadow-xl mb-6 overflow-hidden border border-slate-700/50">
                <div class="flex border-b border-slate-700 overflow-x-auto">
                    <button onclick="showTab('categories')" id="tabCategories" class="flex-1 px-4 md:px-6 py-4 font-semibold border-b-3 border-blue-500 text-blue-400 whitespace-nowrap hover:bg-slate-700/50 transition-colors">
                        ğŸ“‚ Ø§Ù„ÙØ¦Ø§Øª
                    </button>
                    <button onclick="showTab('products')" id="tabProducts" class="flex-1 px-4 md:px-6 py-4 font-semibold text-gray-400 hover:text-blue-400 hover:bg-slate-700/50 whitespace-nowrap transition-colors">
                        ğŸ›ï¸ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                    </button>
                    <button onclick="showTab('settings')" id="tabSettings" class="flex-1 px-4 md:px-6 py-4 font-semibold text-gray-400 hover:text-blue-400 hover:bg-slate-700/50 whitespace-nowrap transition-colors">
                        âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                    </button>
                    <button onclick="showTab('reviews')" id="tabReviews" class="flex-1 px-4 md:px-6 py-4 font-semibold text-gray-400 hover:text-blue-400 hover:bg-slate-700/50 whitespace-nowrap transition-colors">
                        â­ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª
                    </button>
                </div>
            </div>

            <!-- Categories Tab -->
            <div id="categoriesTab" class="space-y-6">
                <div class="bg-slate-800 rounded-xl shadow-lg p-4 md:p-6 border border-slate-700/50">
                    <h2 class="text-xl md:text-2xl font-bold mb-4 text-blue-400">â• Ø¥Ø¶Ø§ÙØ© ÙØ¦Ø© Ø¬Ø¯ÙŠØ¯Ø©</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <input type="text" id="catNameAr" placeholder="Ø§Ø³Ù… Ø§Ù„ÙØ¦Ø© Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ *" class="px-4 py-2 border rounded-lg focus:border-blue-500 focus:outline-none bg-slate-700 text-white placeholder-gray-400">
                        <input type="text" id="catNameEn" placeholder="Category Name (English)" class="px-4 py-2 border rounded-lg focus:border-blue-500 focus:outline-none bg-slate-700 text-white placeholder-gray-400">
                    </div>
                    
                    <!-- Image Upload Section -->
                    <div class="mt-4 space-y-3 border rounded-lg p-4 bg-slate-700 border-slate-600">
                        <h4 class="font-semibold text-sm text-gray-200">ğŸ“¸ ØµÙˆØ±Ø© Ø§Ù„ÙØ¦Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</h4>
                        <div class="flex items-center gap-3">
                            <input type="file" id="catImageFile" accept="image/*" class="flex-1 px-3 py-2 border rounded-lg text-sm" onchange="updateNewCategoryImagePreview(this)">
                            <img id="catImagePreview" src="" alt="Ù…Ø¹Ø§ÙŠÙ†Ø©" class="w-16 h-16 rounded border object-cover hidden">
                        </div>
                        <button type="button" onclick="uploadNewCategoryImage()" class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 text-sm font-medium transition-colors">
                            ğŸ“¤ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©
                        </button>
                    </div>
                    
                    <button onclick="addCategory()" class="mt-4 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 w-full md:w-auto font-medium transition-colors shadow-md">
                        â• Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ¦Ø©
                    </button>
                </div>

                <div class="bg-slate-800 rounded-xl shadow-lg p-4 md:p-6 border border-slate-700/50">
                    <h2 class="text-xl md:text-2xl font-bold mb-4 text-blue-400">ğŸ“‹ Ø§Ù„ÙØ¦Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© (<span id="categoriesCount">0</span>)</h2>
                    <div id="categoriesList" class="space-y-3"></div>
                </div>

                <div class="bg-slate-800 rounded-xl shadow-lg p-4 md:p-6 border border-slate-700/50">
                    <h2 class="text-xl md:text-2xl font-bold mb-4 text-blue-400">ğŸ“‚ Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Ø¥Ù„Ù‰ ÙØ¦Ø©</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <select id="sectionCategorySelect" class="px-4 py-2 border rounded-lg focus:border-blue-500 focus:outline-none bg-slate-700 text-white">
                            <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø© *</option>
                        </select>
                        <input type="text" id="newSectionInput" placeholder="Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯ *" class="px-4 py-2 border rounded-lg focus:border-blue-500 focus:outline-none bg-slate-700 text-white placeholder-gray-400">
                    </div>
                    <button onclick="quickAddSection()" class="mt-4 bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 w-full md:w-auto font-medium transition-colors shadow-md">
                        â• Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù‚Ø³Ù…
                    </button>
                    <div id="selectedCategorySections" class="mt-6 p-4 bg-slate-700 rounded-lg border border-slate-600 hidden">
                        <p class="font-semibold mb-3 text-gray-200">Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠØ©:</p>
                        <div id="sectionsList" class="space-y-2"></div>
                    </div>
                </div>
            </div>            <div id="productsTab" class="hidden space-y-6">
                <div class="bg-slate-800 rounded-xl shadow-lg p-4 md:p-6 border border-slate-700/50">
                    <h2 class="text-xl md:text-2xl font-bold mb-4 text-blue-400">â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <select id="prodCategory" class="px-4 py-2 border rounded-lg focus:border-blue-500 focus:outline-none bg-slate-700 text-white">
                            <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø© *</option>
                        </select>
                        <select id="prodSection" class="px-4 py-2 border rounded-lg focus:border-blue-500 focus:outline-none bg-slate-700 text-white">
                            <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</option>
                        </select>
                        <input type="text" id="prodNameAr" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ *" class="px-4 py-2 border rounded-lg focus:border-blue-500 focus:outline-none bg-slate-700 text-white placeholder-gray-400">
                        <input type="text" id="prodNameEn" placeholder="Product Name (English)" class="px-4 py-2 border rounded-lg focus:border-blue-500 focus:outline-none bg-slate-700 text-white placeholder-gray-400">
                        <input type="number" step="0.01" id="prodPrice" placeholder="Ø§Ù„Ø³Ø¹Ø± *" class="px-4 py-2 border rounded-lg focus:border-blue-500 focus:outline-none bg-slate-700 text-white placeholder-gray-400">
                        <textarea id="prodDescAr" placeholder="Ø§Ù„ÙˆØµÙ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ" class="px-4 py-2 border rounded-lg col-span-1 md:col-span-2 focus:border-blue-500 focus:outline-none bg-slate-700 text-white placeholder-gray-400" rows="2"></textarea>
                        
                        <!-- Image Upload Section -->
                        <div class="col-span-1 md:col-span-2 space-y-3 border rounded-lg p-4 bg-slate-700 border-slate-600">
                            <h4 class="font-semibold text-sm text-gray-200">ğŸ“¸ ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</h4>
                            <div class="flex items-center gap-3">
                                <input type="file" id="prodImageFile" accept="image/*" class="flex-1 px-3 py-2 border rounded-lg text-sm" onchange="updateImagePreview(this)">
                                <img id="prodImagePreview" src="" alt="Ù…Ø¹Ø§ÙŠÙ†Ø©" class="w-16 h-16 rounded border object-cover hidden">
                            </div>
                        </div>

                        <div class="col-span-1 md:col-span-2">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" id="prodFeatured" class="w-4 h-4">
                                <span>Ù…Ù†ØªØ¬ Ù…Ù…ÙŠØ² â­</span>
                            </label>
                        </div>
                    </div>
                    <button onclick="addProduct()" class="mt-4 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 w-full md:w-auto font-medium transition-colors shadow-md">
                        â• Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬
                    </button>
                </div>

                <div class="bg-slate-800 rounded-xl shadow-lg p-4 md:p-6 border border-slate-700/50">
                    <div class="flex justify-between items-center mb-4 flex-wrap gap-4">
                        <h2 class="text-xl md:text-2xl font-bold text-blue-400">ğŸ“¦ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (<span id="productsCount">0</span>)</h2>
                        <div class="flex gap-2 flex-wrap">
                            <select id="filterCategory" onchange="filterProducts()" class="px-3 py-1 border rounded-lg text-sm bg-slate-700 text-white">
                                <option value="all">ÙƒÙ„ Ø§Ù„ÙØ¦Ø§Øª</option>
                            </select>
                            <select id="filterSection" onchange="filterProducts()" class="px-3 py-1 border rounded-lg text-sm bg-slate-700 text-white">
                                <option value="all">ÙƒÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</option>
                            </select>
                        </div>
                    </div>
                    <div id="productsList" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"></div>
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="settingsTab" class="hidden space-y-6">
                <!-- Account Security -->
                <div class="bg-slate-800 rounded-xl shadow-lg p-4 md:p-6 border border-slate-700/50">
                    <h2 class="text-xl md:text-2xl font-bold mb-4 text-blue-400">ğŸ” Ø£Ù…Ø§Ù† Ø§Ù„Ø­Ø³Ø§Ø¨</h2>
                    <div class="space-y-6">
                        <!-- Email Section -->
                        <form onsubmit="event.preventDefault(); updateEmail();" class="border-b pb-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ“§ ØªØºÙŠÙŠØ± Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium mb-2">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ</label>
                                    <div class="flex gap-2">
                                        <input type="email" id="currentEmail" placeholder="example@email.com" class="flex-1 px-4 py-2 border rounded-lg focus:border-amber-500 focus:outline-none" readonly style="background-color: #f3f4f6;">
                                        <button type="button" onclick="copyEmail()" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 font-medium transition-colors" title="Ù†Ø³Ø® Ø§Ù„Ø¨Ø±ÙŠØ¯">
                                            ğŸ“‹ Ù†Ø³Ø®
                                        </button>
                                        <button type="button" onclick="openEmail()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 font-medium transition-colors" title="ÙØªØ­ Ø§Ù„Ø¨Ø±ÙŠØ¯">
                                            âœ‰ï¸ ÙØªØ­
                                        </button>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯ *</label>
                                    <input type="email" id="newEmail" placeholder="newemail@example.com" class="w-full px-4 py-2 border rounded-lg focus:border-amber-500 focus:outline-none" required>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2">Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØºÙŠÙŠØ± *</label>
                                    <input type="password" id="emailConfirmPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" class="w-full px-4 py-2 border rounded-lg focus:border-amber-500 focus:outline-none" autocomplete="current-password" required>
                                </div>
                                <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 font-medium transition-colors">
                                    âœ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
                                </button>
                            </div>
                        </form>

                        <!-- Password Section -->
                        <form onsubmit="event.preventDefault(); updatePassword();">
                            <h3 class="text-lg font-semibold mb-4">ğŸ”‘ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium mb-2">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ© *</label>
                                    <input type="password" id="currentPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" class="w-full px-4 py-2 border rounded-lg focus:border-amber-500 focus:outline-none" required>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© *</label>
                                    <input type="password" id="newPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" class="w-full px-4 py-2 border rounded-lg focus:border-amber-500 focus:outline-none" required>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2">ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© *</label>
                                    <input type="password" id="confirmPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" class="w-full px-4 py-2 border rounded-lg focus:border-amber-500 focus:outline-none" required>
                                </div>
                                <p class="text-xs text-gray-600 bg-amber-50 p-3 rounded-lg">âš ï¸ ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù‚ÙˆÙŠØ© ÙˆØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø£Ø­Ø±Ù ÙƒØ¨ÙŠØ±Ø© ÙˆØµØºÙŠØ±Ø© ÙˆØ£Ø±Ù‚Ø§Ù…</p>
                                <button type="submit" class="bg-emerald-600 text-white px-6 py-2 rounded-lg hover:bg-emerald-700 font-medium transition-colors shadow-md">
                                    âœ… ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Restaurant Basic Info -->
                <div class="bg-slate-800 rounded-xl shadow-lg p-4 md:p-6 border border-slate-700/50">
                    <h2 class="text-xl md:text-2xl font-bold mb-4 text-blue-400">ğŸª Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø·Ø¹Ù…</h2>
                    <div class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <input type="text" id="restNameAr" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ø¹Ù… Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ *" class="px-4 py-2 border rounded-lg focus:border-blue-500 focus:outline-none bg-slate-700 text-white placeholder-gray-400">
                            <input type="text" id="restNameEn" placeholder="Restaurant Name (English)" class="px-4 py-2 border rounded-lg focus:border-blue-500 focus:outline-none bg-slate-700 text-white placeholder-gray-400">
                            <input type="text" id="restCurrency" placeholder="Ø§Ù„Ø¹Ù…Ù„Ø© (Ù…Ø«Ø§Ù„: Ø¬.Ù…)" class="px-4 py-2 border rounded-lg focus:border-blue-500 focus:outline-none bg-slate-700 text-white placeholder-gray-400">
                            <input type="text" id="restWhatsapp" placeholder="01xxxxxxxxx Ø£Ùˆ +201xxxxxxxxx" class="px-4 py-2 border rounded-lg focus:border-blue-500 focus:outline-none bg-slate-700 text-white placeholder-gray-400" onblur="document.getElementById('restWhatsapp').value = normalizeEgyptianPhone(document.getElementById('restWhatsapp').value)">
                            <p class="text-xs text-gray-400 mt-1">âœ… Ø§Ù„ØµÙŠØº Ø§Ù„Ù…Ù‚Ø¨ÙˆÙ„Ø©: 01234567890 Ø£Ùˆ +201234567890 Ø£Ùˆ 00201234567890 Ø£Ùˆ 201234567890</p>
                        </div>
                    </div>
                </div>

                <!-- Social Media Links -->
                <div class="bg-slate-800 rounded-xl shadow-lg p-4 md:p-6 border border-slate-700/50">
                    <h2 class="text-xl md:text-2xl font-bold mb-4 text-blue-400">ğŸ“± ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ</h2>
                    <div class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="primaryColor" class="block text-sm font-medium text-gray-700 mb-1">ğŸ¨ Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ</label>
                                <input type="color" id="primaryColor" name="primary_color" class="w-full h-12 p-1 border-gray-300 rounded-lg cursor-pointer">
                            </div>
                            <div>
                                <label for="currency" class="block text-sm font-medium text-gray-700 mb-1">ğŸ’µ Ø§Ù„Ø¹Ù…Ù„Ø©</label>
                                <input type="text" id="currency" name="currency" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm" placeholder="e.g., Ø¬.Ù…, Ø±ÙŠØ§Ù„"> 
                            </div>
                        </div>
                        <div class="mt-6">
                            <h3 class="text-lg font-semibold mb-4 text-gray-800">ğŸ–¼ï¸ Ø¨Ø§Ù†Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª (Ø­Ø¯ Ø£Ù‚ØµÙ‰ 3 ØµÙˆØ±)</h3>
                            <div class="p-4 border rounded-lg bg-gray-50 space-y-4">
                                <div id="adBannersPreviewContainer" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 min-h-[100px]">
                                    <!-- Image previews will be injected here -->
                                </div>
                                <div>
                                    <label for="adBannerFiles" class="block text-sm font-medium text-gray-700 mb-1">Ø±ÙØ¹ ØµÙˆØ± Ø¬Ø¯ÙŠØ¯Ø©</label>
                                    <input type="file" id="adBannerFiles" accept="image/*" multiple onchange="handleBannerImageUpload(this.files)" class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"/>
                                    <p class="text-xs text-gray-500 mt-1">ğŸ’¡ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ø¯ÙŠØ¯ ØµÙˆØ±Ø© Ø£Ùˆ Ø£ÙƒØ«Ø± (Ø­Ø¯ Ø£Ù‚ØµÙ‰ 3 ØµÙˆØ±). Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡: Ø£Ù‚Ù„ Ù…Ù† 2 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª Ù„ÙƒÙ„ ØµÙˆØ±Ø©</p>
                                </div>
                            </div>
                        </div>
                        <div class="mt-6">
                            <h3 class="text-lg font-semibold mb-4 text-gray-800">ğŸ“± Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ù…Ù† ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ</h3>
                            <div class="p-4 border rounded-lg bg-gray-50 space-y-4">
                                <div>
                                    <label for="socialAdImage" class="block text-sm font-medium text-gray-700 mb-1">ğŸ“¸ Ø±Ø§Ø¨Ø· Ø¥Ø¹Ù„Ø§Ù† ØµÙˆØ±Ø© (Ø¥Ù†Ø³ØªØ¬Ø±Ø§Ù…/ÙÙŠØ³Ø¨ÙˆÙƒ/ØºÙŠØ±Ù‡Ø§)</label>
                                    <input type="url" id="socialAdImage" placeholder="https://instagram.com/p/..." class="w-full px-4 py-2 border rounded-lg focus:border-amber-500 focus:outline-none text-sm"/>
                                    <p class="text-xs text-gray-500 mt-1">Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ù‡Ø°Ù‡ Ø§Ù„ØµÙˆØ±Ø© ÙÙŠ Ø§Ù„Ø¨Ø§Ù†Ø± Ø¥Ø°Ø§ ØªÙ… Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ø§Ø¨Ø·</p>
                                </div>
                                <div>
                                    <label for="socialAdVideo" class="block text-sm font-medium text-gray-700 mb-1">ğŸ¥ Ø±Ø§Ø¨Ø· Ø¥Ø¹Ù„Ø§Ù† ÙÙŠØ¯ÙŠÙˆ (ØªÙŠÙƒ ØªÙˆÙƒ/Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…/ÙŠÙˆØªÙŠÙˆØ¨/ØºÙŠØ±Ù‡Ø§)</label>
                                    <input type="url" id="socialAdVideo" placeholder="https://tiktok.com/@..." class="w-full px-4 py-2 border rounded-lg focus:border-amber-500 focus:outline-none text-sm"/>
                                    <p class="text-xs text-gray-500 mt-1">Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ù‡Ø°Ø§ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙÙŠ Ø§Ù„Ø¨Ø§Ù†Ø± Ø¥Ø°Ø§ ØªÙ… Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ø§Ø¨Ø·</p>
                                </div>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">ğŸ“˜ ÙÙŠØ³Ø¨ÙˆÙƒ</label>
                            <input type="text" id="restFacebook" placeholder="https://facebook.com/yourpage" class="w-full px-4 py-2 border rounded-lg focus:border-amber-500 focus:outline-none">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">ğŸ“¸ Ø¥Ù†Ø³ØªØ¬Ø±Ø§Ù…</label>
                            <input type="text" id="restInstagram" placeholder="https://instagram.com/yourpage" class="w-full px-4 py-2 border rounded-lg focus:border-amber-500 focus:outline-none">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">ğŸµ ØªÙŠÙƒ ØªÙˆÙƒ</label>
                            <input type="text" id="restTiktok" placeholder="https://tiktok.com/@yourpage" class="w-full px-4 py-2 border rounded-lg focus:border-amber-500 focus:outline-none">
                        </div>
                    </div>
                </div>

                <!-- Visual Identity & Theme -->
                <div class="bg-slate-800 rounded-xl shadow-lg p-4 md:p-6 border border-slate-700/50">
                    <h2 class="text-xl md:text-2xl font-bold mb-4 text-blue-400">ğŸ¨ Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ø¨ØµØ±ÙŠØ© ÙˆØ§Ù„Ù…Ø¸Ù‡Ø±</h2>
                    <div class="space-y-6">
                        <!-- Logo Section -->
                        <div class="border-b pb-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ–¼ï¸ Ø§Ù„Ø´Ø¹Ø§Ø± (Ø§Ù„Ù„ÙˆØ¬Ùˆ)</h3>
                            <div class="space-y-4">
                                <!-- File Upload -->
                                <div>
                                    <label class="block text-sm font-medium mb-2">Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©</label>
                                    <div class="flex flex-col sm:flex-row gap-2">
                                        <input type="file" id="logoFile" accept="image/png,image/jpeg,image/svg+xml,image/webp" class="flex-1 px-4 py-2 border rounded-lg focus:border-blue-500 focus:outline-none text-sm file:mr-2 file:py-1 file:px-3 file:rounded file:border-0 file:text-xs file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 cursor-pointer">
                                        <button onclick="uploadLogo()" id="uploadLogoBtn" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium text-sm transition-colors whitespace-nowrap shadow-md">
                                            ğŸ“¤ Ø±ÙØ¹
                                        </button>
                                    </div>
                                    <p class="text-xs text-gray-500 mt-2">ğŸ’¡ ØµÙŠØº: PNG, JPG, SVG, WebP</p>
                                </div>

                                <!-- Preview -->
                                <div class="flex justify-center">
                                    <div id="logoPreview" class="w-32 h-32 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden border-2 border-dashed border-gray-300">
                                        <span class="text-gray-400 text-3xl">ğŸ“·</span>
                                    </div>
                                </div>

                                <!-- URL Input -->
                                <div>
                                    <label class="block text-sm font-medium mb-2">Ø£Ùˆ Ø£Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø· Ù…Ø¨Ø§Ø´Ø±</label>
                                    <input type="text" id="restLogo" placeholder="https://example.com/logo.png" class="w-full px-4 py-2 border rounded-lg focus:border-amber-500 focus:outline-none text-sm">
                                </div>
                            </div>
                        </div>

                        <!-- Color Theme Section -->
                        <div class="border-b pb-6">
                            <h3 class="text-lg font-semibold mb-4">ğŸ¯ Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <!-- Primary Color -->
                                <div>
                                    <label class="block text-sm font-medium mb-2">Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ</label>
                                    <div class="flex gap-3 items-center">
                                        <input type="color" id="restPrimaryColor" class="w-16 h-12 border rounded-lg cursor-pointer">
                                        <input type="text" id="restPrimaryColorHex" placeholder="#D97706" class="flex-1 px-4 py-2 border rounded-lg focus:border-amber-500 focus:outline-none text-sm font-mono">
                                    </div>
                                    <p class="text-xs text-gray-500 mt-2">ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„Ù„ÙˆÙ† ÙÙŠ Ø§Ù„Ø²Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ÙˆØ§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† ÙˆØ§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù‡Ù…Ø©</p>
                                </div>

                                <!-- Preview Box -->
                                <div>
                                    <label class="block text-sm font-medium mb-2">Ù…Ø¹Ø§ÙŠÙ†Ø©</label>
                                    <div id="colorPreview" class="h-12 rounded-lg border-2 border-gray-300 flex items-center justify-center text-white font-bold bg-blue-600">
                                        Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù„ÙˆÙ†
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Theme Presets -->
                        <div>
                            <h3 class="text-lg font-semibold mb-4">ğŸ­ Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©</h3>
                            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3">
                                <button onclick="applyColorTheme('#D97706')" class="p-3 rounded-lg border-2 hover:border-gray-400 transition-all" style="background-color: #D97706; color: white;" title="Ø§Ù„Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ (Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ)">
                                    <span class="text-sm font-medium">ğŸŠ Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ</span>
                                </button>
                                <button onclick="applyColorTheme('#EF4444')" class="p-3 rounded-lg border-2 hover:border-gray-400 transition-all" style="background-color: #EF4444; color: white;" title="Ø£Ø­Ù…Ø±">
                                    <span class="text-sm font-medium">â¤ï¸ Ø£Ø­Ù…Ø±</span>
                                </button>
                                <button onclick="applyColorTheme('#8B5CF6')" class="p-3 rounded-lg border-2 hover:border-gray-400 transition-all" style="background-color: #8B5CF6; color: white;" title="Ø¨Ù†ÙØ³Ø¬ÙŠ">
                                    <span class="text-sm font-medium">ğŸ’œ Ø¨Ù†ÙØ³Ø¬ÙŠ</span>
                                </button>
                                <button onclick="applyColorTheme('#06B6D4')" class="p-3 rounded-lg border-2 hover:border-gray-400 transition-all" style="background-color: #06B6D4; color: white;" title="Ø³Ù…Ø§ÙˆÙŠ">
                                    <span class="text-sm font-medium">ğŸ”µ Ø³Ù…Ø§ÙˆÙŠ</span>
                                </button>
                                <button onclick="applyColorTheme('#10B981')" class="p-3 rounded-lg border-2 hover:border-gray-400 transition-all" style="background-color: #10B981; color: white;" title="Ø£Ø®Ø¶Ø±">
                                    <span class="text-sm font-medium">ğŸ’š Ø£Ø®Ø¶Ø±</span>
                                </button>
                                <button onclick="applyColorTheme('#F59E0B')" class="p-3 rounded-lg border-2 hover:border-gray-400 transition-all" style="background-color: #F59E0B; color: white;" title="Ø°Ù‡Ø¨ÙŠ">
                                    <span class="text-sm font-medium">â­ Ø°Ù‡Ø¨ÙŠ</span>
                                </button>
                                <button onclick="applyColorTheme('#EC4899')" class="p-3 rounded-lg border-2 hover:border-gray-400 transition-all" style="background-color: #EC4899; color: white;" title="ÙˆØ±Ø¯ÙŠ">
                                    <span class="text-sm font-medium">ğŸŒ¸ ÙˆØ±Ø¯ÙŠ</span>
                                </button>
                                <button onclick="applyColorTheme('#6366F1')" class="p-3 rounded-lg border-2 hover:border-gray-400 transition-all" style="background-color: #6366F1; color: white;" title="Ù†ÙŠÙ„ÙŠ">
                                    <span class="text-sm font-medium">ğŸ’ Ù†ÙŠÙ„ÙŠ</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Save Button -->
                <div class="bg-slate-800 rounded-xl shadow-lg p-4 md:p-6 flex gap-3 border border-slate-700/50">
                    <button onclick="saveSettings()" class="bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 font-semibold flex items-center gap-2 transition-colors shadow-md">
                        ğŸ’¾ Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                    </button>
                    <button onclick="resetSettings()" class="bg-gray-400 text-white px-6 py-3 rounded-lg hover:bg-gray-500 font-semibold transition-colors shadow-md">
                        ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†
                    </button>
                </div>
            </div>

            <!-- Reviews Tab -->
            <div id="reviewsTab" class="hidden space-y-6">
                <div class="bg-slate-800 rounded-xl shadow-lg p-4 md:p-6 border border-slate-700/50">
                    <h2 class="text-2xl font-bold mb-6 flex items-center gap-2 text-blue-400">
                        â­ ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
                        <span class="text-sm font-normal text-gray-400">(<span id="reviewsCount">0</span> ØªÙ‚ÙŠÙŠÙ…)</span>
                    </h2>

                    <!-- Filter Buttons -->
                    <div class="flex flex-wrap gap-2 mb-6">
                        <button onclick="filterReviews('all')" id="filterAllBtn" class="px-4 py-2 rounded-lg bg-blue-600/20 text-blue-400 font-semibold border border-blue-500 ring-2 ring-blue-500 ring-offset-2 ring-offset-slate-800">ğŸ“Š Ø§Ù„ÙƒÙ„</button>
                        <button onclick="filterReviews('pending')" id="filterPendingBtn" class="px-4 py-2 rounded-lg bg-yellow-600/20 text-yellow-400 font-semibold border border-yellow-500 hover:bg-yellow-600/30 transition-colors">â³ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</button>
                        <button onclick="filterReviews('approved')" id="filterApprovedBtn" class="px-4 py-2 rounded-lg bg-emerald-600/20 text-emerald-400 font-semibold border border-emerald-500 hover:bg-emerald-600/30 transition-colors">âœ… Ù…ÙˆØ§ÙÙ‚ Ø¹Ù„ÙŠÙ‡</button>
                    </div>

                    <!-- Reviews List -->
                    <div id="reviewsList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <!-- Review cards will be injected here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Basic utility functions
        function showTab(tab) {
            ['categories', 'products', 'settings', 'reviews'].forEach(t => {
                const tabEl = document.getElementById(`${t}Tab`);
                if (tabEl) tabEl.classList.add('hidden');
                const btn = document.getElementById(`tab${t.charAt(0).toUpperCase() + t.slice(1)}`);
                if (btn) {
                    btn.classList.remove('border-b-2', 'border-amber-600', 'text-amber-600');
                    btn.classList.add('text-gray-600');
                }
            });
            
            const tabEl = document.getElementById(`${tab}Tab`);
            if (tabEl) tabEl.classList.remove('hidden');
            
            const activeBtn = document.getElementById(`tab${tab.charAt(0).toUpperCase() + tab.slice(1)}`);
            if (activeBtn) {
                activeBtn.classList.add('border-b-2', 'border-amber-600', 'text-amber-600');
                activeBtn.classList.remove('text-gray-600');
            }
        }
    </script>

    <script>
        // Basic utility functions
        function showTab(tab) {
            ['categories', 'products', 'settings', 'reviews'].forEach(t => {
                const tabEl = document.getElementById(`${t}Tab`);
                if (tabEl) tabEl.classList.add('hidden');
                const btn = document.getElementById(`tab${t.charAt(0).toUpperCase() + t.slice(1)}`);
                if (btn) {
                    btn.classList.remove('border-b-2', 'border-amber-600', 'text-amber-600');
                    btn.classList.add('text-gray-600');
                }
            });
            
            const tabEl = document.getElementById(`${tab}Tab`);
            if (tabEl) tabEl.classList.remove('hidden');
            
            const activeBtn = document.getElementById(`tab${tab.charAt(0).toUpperCase() + tab.slice(1)}`);
            if (activeBtn) {
                activeBtn.classList.add('border-b-2', 'border-amber-600', 'text-amber-600');
                activeBtn.classList.remove('text-gray-600');
            }
        }
    </script>

    <!-- Load configuration and database modules -->
    <script src="performance-optimizations.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <script src="config.js"></script>
    <script src="database.js"></script>
    <script src="admin-script.js"></script>

    <!-- Account Security Functions -->
    <script>
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', async function() {
            await loadCurrentUserData();
            
            // Ø¥Ø¶Ø§ÙØ© event listener Ù„Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', function() {
                    if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ')) {
                        localStorage.removeItem('userId');
                        localStorage.removeItem('userEmail');
                        localStorage.removeItem('restaurantId');
                        localStorage.removeItem('isLoggedIn');
                        localStorage.removeItem('userFullName');
                        window.location.href = 'admin.html';
                    }
                });
            }
        });

        // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ Ù…Ù† Supabase
        async function loadCurrentUserData() {
            const userId = localStorage.getItem('userId');
            const restaurantId = localStorage.getItem('restaurantId');
            
            if (!userId || !restaurantId) {
                console.error('Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©');
                return;
            }

            try {
                const user = await fetchAPI(`users?id=eq.${userId}&restaurant_id=eq.${restaurantId}`);
                if (user && user.length > 0) {
                    document.getElementById('currentEmail').value = user[0].email || '';
                    localStorage.setItem('userEmail', user[0].email);
                    localStorage.setItem('userFullName', user[0].full_name || '');
                }
            } catch(e) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', e);
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
        async function updateEmail() {
            const newEmail = document.getElementById('newEmail').value.trim();
            const password = document.getElementById('emailConfirmPassword').value.trim();
            const userId = localStorage.getItem('userId');
            const restaurantId = localStorage.getItem('restaurantId');

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ù‚ÙˆÙ„
            if (!newEmail) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯');
                return;
            }
            if (!password) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØºÙŠÙŠØ±');
                return;
            }
            if (!isValidEmail(newEmail)) {
                alert('âš ï¸ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­');
                return;
            }
            if (!userId || !restaurantId) {
                alert('âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
                return;
            }

            try {
                // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠØ©
                const users = await fetchAPI(`users?id=eq.${userId}&restaurant_id=eq.${restaurantId}`);
                if (!users || users.length === 0) {
                    alert('âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
                    return;
                }

                const currentUser = users[0];

                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
                const passwordMatch = await verifyPassword(password, currentUser.password_hash);
                if (!passwordMatch) {
                    alert('âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©');
                    return;
                }

                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯ Ù…Ù† Ù‚Ø¨Ù„ (ÙÙ‚Ø· Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†)
                const existingEmail = await fetchAPI(`users?email=eq.${newEmail}&restaurant_id=eq.${restaurantId}`);
                if (existingEmail && existingEmail.length > 0 && existingEmail[0].id !== userId) {
                    alert('âŒ Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„');
                    return;
                }

                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙÙŠ Supabase
                const updateResult = await fetchAPI(`users?id=eq.${userId}`, {
                    method: 'PATCH',
                    body: JSON.stringify({
                        email: newEmail,
                        updated_at: new Date().toISOString()
                    })
                });

                if (updateResult) {
                    // ØªØ­Ø¯ÙŠØ« localStorage
                    localStorage.setItem('userEmail', newEmail);

                    // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø­Ù‚ÙˆÙ„
                    document.getElementById('newEmail').value = '';
                    document.getElementById('emailConfirmPassword').value = '';
                    document.getElementById('currentEmail').value = newEmail;

                    alert('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø¨Ù†Ø¬Ø§Ø­');
                } else {
                    alert('âŒ ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ');
                }
            } catch(e) {
                console.error('Ø®Ø·Ø£:', e);
                alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ');
            }
        }

        // ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
        async function updatePassword() {
            const currentPassword = document.getElementById('currentPassword').value.trim();
            const newPassword = document.getElementById('newPassword').value.trim();
            const confirmPassword = document.getElementById('confirmPassword').value.trim();
            const userId = localStorage.getItem('userId');
            const restaurantId = localStorage.getItem('restaurantId');

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ù‚ÙˆÙ„
            if (!currentPassword) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ©');
                return;
            }
            if (!newPassword) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©');
                return;
            }
            if (!confirmPassword) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©');
                return;
            }
            if (newPassword !== confirmPassword) {
                alert('âš ï¸ ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©');
                return;
            }
            if (newPassword.length < 8) {
                alert('âš ï¸ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 8 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
                return;
            }
            if (newPassword === currentPassword) {
                alert('âš ï¸ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù…Ø®ØªÙ„ÙØ© Ø¹Ù† Ø§Ù„Ø­Ø§Ù„ÙŠØ©');
                return;
            }
            if (!userId || !restaurantId) {
                alert('âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
                return;
            }

            try {
                // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠØ©
                const users = await fetchAPI(`users?id=eq.${userId}&restaurant_id=eq.${restaurantId}`);
                if (!users || users.length === 0) {
                    alert('âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
                    return;
                }

                const currentUser = users[0];

                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ©
                const passwordMatch = await verifyPassword(currentPassword, currentUser.password_hash);
                if (!passwordMatch) {
                    alert('âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ© ØºÙŠØ± ØµØ­ÙŠØ­Ø©');
                    return;
                }

                // ØªØ¬Ø²Ø¦Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
                const newPasswordHash = await hashPassword(newPassword);

                // ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙÙŠ Supabase
                const updateResult = await fetchAPI(`users?id=eq.${userId}`, {
                    method: 'PATCH',
                    body: JSON.stringify({
                        password_hash: newPasswordHash,
                        updated_at: new Date().toISOString()
                    })
                });

                if (updateResult) {
                    // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø­Ù‚ÙˆÙ„
                    document.getElementById('currentPassword').value = '';
                    document.getElementById('newPassword').value = '';
                    document.getElementById('confirmPassword').value = '';

                    alert('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­. Ø³ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬Ùƒ Ø§Ù„Ø¢Ù†.');
                    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ø¯ÙŠØ«
                    setTimeout(() => {
                        localStorage.removeItem('userId');
                        localStorage.removeItem('userEmail');
                        localStorage.removeItem('restaurantId');
                        localStorage.removeItem('isLoggedIn');
                        localStorage.removeItem('userFullName');
                        window.location.href = 'admin.html';
                    }, 1000);
                } else {
                    alert('âŒ ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');
                }
            } catch(e) {
                console.error('Ø®Ø·Ø£:', e);
                alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');
            }
        }

        // Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        // Ø¯Ø§Ù„Ø© ØªØ¬Ø²Ø¦Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (Ø§Ø³ØªØ®Ø¯Ø§Ù… SHA-256)
        async function hashPassword(password) {
            const encoder = new TextEncoder();
            const data = encoder.encode(password);
            const hashBuffer = await crypto.subtle.digest('SHA-256', data);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            return hashHex;
        }

        // Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± - ØªØ¯Ø¹Ù… Ø·Ø±Ù‚ ØªØ¬Ø²Ø¦Ø© Ù…ØªØ¹Ø¯Ø¯Ø©
        async function verifyPassword(password, hash) {
            // Method 1: SHA-256 (new method)
            const sha256Hash = await hashPassword(password);
            if (sha256Hash === hash) {
                return true;
            }

            // Method 2: Base64 (legacy method)
            const base64Hash = btoa(password);
            if (base64Hash === hash) {
                return true;
            }

            // Method 3: Plain text (for testing only)
            if (password === hash) {
                return true;
            }

            return false;
        }

        // Ù†Ø³Ø® Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ
        function copyEmail() {
            const emailInput = document.getElementById('currentEmail');
            const email = emailInput.value.trim();
            
            if (!email) {
                alert('âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ù†Ø³Ø®Ù‡');
                return;
            }

            // Ù†Ø³Ø® Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©
            navigator.clipboard.writeText(email).then(() => {
                alert('âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø¨Ù†Ø¬Ø§Ø­');
            }).catch(() => {
                // Ø·Ø±ÙŠÙ‚Ø© Ø¨Ø¯ÙŠÙ„Ø© Ø¥Ø°Ø§ Ù„Ù… ØªÙ†Ø¬Ø­ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰
                const textarea = document.createElement('textarea');
                textarea.value = email;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                alert('âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø¨Ù†Ø¬Ø§Ø­');
            });
        }

        // ÙØªØ­ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙÙŠ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
        function openEmail() {
            const email = document.getElementById('currentEmail').value.trim();
            
            if (!email) {
                alert('âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„ÙØªØ­Ù‡');
                return;
            }

            // ÙØªØ­ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
            window.location.href = `mailto:${email}`;
        }

        // ØªØ­ÙˆÙŠÙ„ Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³ Ø¢Ø¨ Ø§Ù„Ù…ØµØ±ÙŠ Ø¥Ù„Ù‰ ØµÙŠØºØ© Ø¯ÙˆÙ„ÙŠØ© ØµØ­ÙŠØ­Ø©
        function normalizeEgyptianPhone(phone) {
            if (!phone) return '';
            
            // Ø¥Ø²Ø§Ù„Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³Ø§ÙØ§Øª ÙˆØ§Ù„Ø¹Ù„Ø§Ù…Ø§Øª ØºÙŠØ± Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠØ©
            phone = phone.trim().replace(/[\s\-\(\)]/g, '');
            
            // Ø¥Ø°Ø§ Ø¨Ø¯Ø£ Ø¨Ù€ 01 (Ø§Ù„ØµÙŠØºØ© Ø§Ù„Ù…ØµØ±ÙŠØ© Ø§Ù„Ù…Ø­Ù„ÙŠØ©) â†’ Ø­ÙˆÙ„ Ø¥Ù„Ù‰ 20
            if (phone.startsWith('01')) {
                phone = '2' + phone;
            }
            // Ø¥Ø°Ø§ Ø¨Ø¯Ø£ Ø¨Ù€ +20 (ØµÙŠØºØ© Ø¯ÙˆÙ„ÙŠØ© Ù…Ø¹ +) â†’ Ø§Ø­Ø°Ù +
            else if (phone.startsWith('+20')) {
                phone = phone.substring(1);
            }
            // Ø¥Ø°Ø§ Ø¨Ø¯Ø£ Ø¨Ù€ 0020 (ØµÙŠØºØ© Ø¯ÙˆÙ„ÙŠØ© Ù…Ø¹ 00) â†’ Ø­ÙˆÙ„ Ø¥Ù„Ù‰ 20
            else if (phone.startsWith('0020')) {
                phone = phone.substring(2);
            }
            // Ø¥Ø°Ø§ Ù„Ù… ÙŠØ¨Ø¯Ø£ Ø¨Ù€ 20 ÙˆÙ„ÙŠØ³ Ù„Ù‡ Ø¨Ø§Ø¯Ø¦Ø© ØµØ­ÙŠØ­Ø©ØŒ Ø§ÙØªØ±Ø¶ Ø£Ù†Ù‡ Ø±Ù‚Ù… Ù…Ø­Ù„ÙŠ
            else if (!phone.startsWith('20')) {
                phone = '20' + phone;
            }
            
            return phone;
        }

        // ØªØ­ÙˆÙŠÙ„ Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³ Ø¢Ø¨ Ø§Ù„Ù…ØµØ±ÙŠ Ø¥Ù„Ù‰ ØµÙŠØºØ© Ø¯ÙˆÙ„ÙŠØ© ØµØ­ÙŠØ­Ø©
        function normalizeEgyptianPhone(phone) {
            if (!phone) return '';
            
            // Ø¥Ø²Ø§Ù„Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³Ø§ÙØ§Øª ÙˆØ§Ù„Ø¹Ù„Ø§Ù…Ø§Øª ØºÙŠØ± Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠØ©
            phone = phone.trim().replace(/[\s\-\(\)\.]/g, '');
            
            // Ø¥Ø°Ø§ Ø¨Ø¯Ø£ Ø¨Ù€ 01 (Ø§Ù„ØµÙŠØºØ© Ø§Ù„Ù…ØµØ±ÙŠØ© Ø§Ù„Ù…Ø­Ù„ÙŠØ©) â†’ Ø­ÙˆÙ„ Ø¥Ù„Ù‰ 201
            if (phone.startsWith('01')) {
                phone = '2' + phone;
            }
            // Ø¥Ø°Ø§ Ø¨Ø¯Ø£ Ø¨Ù€ +20 (ØµÙŠØºØ© Ø¯ÙˆÙ„ÙŠØ© Ù…Ø¹ +) â†’ Ø§Ø­Ø°Ù +
            else if (phone.startsWith('+20')) {
                phone = phone.substring(1);
            }
            // Ø¥Ø°Ø§ Ø¨Ø¯Ø£ Ø¨Ù€ 0020 (ØµÙŠØºØ© Ø¯ÙˆÙ„ÙŠØ© Ù…Ø¹ 00) â†’ Ø­ÙˆÙ„ Ø¥Ù„Ù‰ 20
            else if (phone.startsWith('0020')) {
                phone = phone.substring(2);
            }
            // Ø¥Ø°Ø§ Ù„Ù… ÙŠØ¨Ø¯Ø£ Ø¨Ù€ 20 ÙˆÙ„ÙŠØ³ Ù„Ù‡ Ø¨Ø§Ø¯Ø¦Ø© ØµØ­ÙŠØ­Ø©ØŒ Ø§ÙØªØ±Ø¶ Ø£Ù†Ù‡ Ø±Ù‚Ù… Ù…Ø­Ù„ÙŠ
            else if (!phone.startsWith('20')) {
                phone = '20' + phone;
            }
            
            return phone;
        }

        // ÙØªØ­ Ø±Ø§Ø¨Ø· Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
        function openMenuLink() {
            const restaurantId = localStorage.getItem('restaurantId');
            if (!restaurantId) {
                alert('âŒ Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø·Ø¹Ù…');
                return;
            }
            const menuUrl = `${window.location.origin}/menu.html?restaurant_id=${restaurantId}`;
            window.open(menuUrl, '_blank');
        }

        // Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
        function copyMenuLink() {
            const restaurantId = localStorage.getItem('restaurantId');
            if (!restaurantId) {
                alert('âŒ Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø·Ø¹Ù…');
                return;
            }
            const menuUrl = `${window.location.origin}/menu.html?restaurant_id=${restaurantId}`;
            
            // Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©
            navigator.clipboard.writeText(menuUrl).then(() => {
                alert('âœ… ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­!\n\n' + menuUrl);
            }).catch(() => {
                // Ø·Ø±ÙŠÙ‚Ø© Ø¨Ø¯ÙŠÙ„Ø© Ø¥Ø°Ø§ Ù„Ù… ØªÙ†Ø¬Ø­ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰
                const textarea = document.createElement('textarea');
                textarea.value = menuUrl;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                alert('âœ… ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­!\n\n' + menuUrl);
            });
        }

        // Ø¯Ø§Ù„Ø© fetchAPI Ù„Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Supabase (Ù…Ø¹ ØªØ­Ø³Ù‘Ù† Ø§Ù„Ø£Ø¯Ø§Ø¡: timeout, cache, default selects)
        const _requestCache = new Map();
        const _CACHE_TTL = 3 * 60 * 1000; // 3 minutes cache for GET requests

        async function fetchAPI(endpoint, options = {}) {
            const SUPABASE_URL = localStorage.getItem('supabaseUrl') || 'https://putgtsdgeyqyptamwpnx.supabase.co';
            const SUPABASE_KEY = localStorage.getItem('supabaseKey') || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB1dGd0c2RnZXlxeXB0YW13cG54Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjczODMxMzAsImV4cCI6MjA4Mjk1OTEzMH0.bo30DP6UxtpHSvKTCwtaUmkJR8aT-BNEhyrW35IKsVE';
            const method = (options.method || 'GET').toUpperCase();

            // Simple request cache for GET to avoid repeated heavy calls
            const cacheKey = `${endpoint}|${JSON.stringify(options)}`;
            if (method === 'GET') {
                const cached = _requestCache.get(cacheKey);
                if (cached && (Date.now() - cached.ts) < _CACHE_TTL) {
                    return cached.data;
                }
            }

            // Default column selections to reduce payload for heavy resources
            let resourcePath = endpoint;
            if (method === 'GET' && !/select=/i.test(endpoint)) {
                const resource = endpoint.split('?')[0].split('/')[0];
                const defaultSelects = {
                    products: 'id,name_ar,name_en,price,image_url,is_available,is_featured,category_id,description_ar,display_order',
                    categories: 'id,name_ar,name_en,is_active,sections,display_order,image_url',
                    users: 'id,email,full_name,role',
                    restaurant_settings: 'id,primary_color,logo_url,restaurant_id',
                    reviews: 'id,restaurant_id,customer_name,customer_phone,customer_governorate,customer_city,place_rating,products_rating,service_rating,comment,is_approved,created_at,updated_at'
                };
                const select = defaultSelects[resource] || '*';
                const separator = endpoint.includes('?') ? '&' : '?';
                resourcePath = `${endpoint}${separator}select=${select}`;
            }

            const url = `${SUPABASE_URL}/rest/v1/${resourcePath}`;

            // Timeout via AbortController
            const controller = new AbortController();
            const timeoutMs = options.timeout || 12000; // 12s default timeout
            const timeoutId = setTimeout(() => controller.abort(), timeoutMs);

            try {
                const response = await fetch(url, {
                    method: method,
                    signal: controller.signal,
                    ...options,
                    headers: {
                        'apikey': SUPABASE_KEY,
                        'Authorization': `Bearer ${SUPABASE_KEY}`,
                        'Content-Type': 'application/json',
                        'Prefer': 'return=representation',
                        ...options.headers
                    }
                });

                clearTimeout(timeoutId);

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const contentType = response.headers.get('content-type') || '';
                if (!contentType.includes('application/json')) {
                    // return raw text for non-json (e.g., images or other endpoints)
                    const text = await response.text();
                    return text;
                }

                const data = await response.json();
                const normalized = Array.isArray(data) ? data : [data];

                // Cache GET responses
                if (method === 'GET') {
                    _requestCache.set(cacheKey, { ts: Date.now(), data: normalized });
                }

                return normalized;
            } catch (error) {
                clearTimeout(timeoutId);
                console.error('Fetch API Error:', error);
                return null;
            }
        }
    </script>
    <!-- Footer -->
    <footer class="bg-black/50 backdrop-blur-sm text-gray-400 text-center py-6 mt-10 border-t border-gray-700/50">
        <div class="max-w-4xl mx-auto px-4">
            <p class="mb-2 text-sm">ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø© Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ø¨Ø¯ Ù„Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§Øª</p>
            <p class="mb-2 text-sm">Developed by Al-Abd Software Company</p>
            <p class="mb-2 text-sm">Ù…. Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ù‡Ø§Ù†ÙŠ</p>
            <p class="mb-2 text-sm">Eng. Abdullah Hani</p>
            <p class="mb-2 text-sm">Øª. 01220200747</p>
            <p class="mb-3 text-sm">Tel. 01220200747</p>
            <p class="text-xs border-t border-gray-700 pt-3">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© | All Rights Reserved Â©</p>
        </div>
    </footer>
</body>
</html>

